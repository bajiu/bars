require=function c(s,a,r){function h(e,t){if(!a[e]){if(!s[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return h(s[e][1][t]||t)},i,i.exports,c,s,a,r)}return a[e].exports}for(var d="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({Game:[function(t,e,o){"use strict";cc._RF.push(e,"db5a7DRHNZF+qc0EKLoo2a2","Game");var n=t("./common/conf"),i=t("./common/rockBg");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},ring:{default:null,type:i,displayName:"摇杆背景节点"},stickX:{default:0,displayName:"摇杆X位置"},stickY:{default:0,displayName:"摇杆Y位置"},touchType:{default:n.TouchType.DEFAULT,type:n.TouchType,displayName:"触摸类型"},sprite:{default:null,type:cc.Node,displayName:"目标节点"}},onLoad:function(){this._createStickSprite()},_createStickSprite:function(){console.log(this.rocker)}}),cc._RF.pop()},{"./common/conf":"conf","./common/rockBg":"rockBg"}],conf:[function(t,e,o){"use strict";cc._RF.push(e,"71dd8QGS59Abr6VPEbFeHHm","conf"),e.exports={TouchType:cc.Enum({DEFAULT:1,FOLLOW:2})},cc._RF.pop()},{}],rockBg:[function(t,e,o){"use strict";cc._RF.push(e,"9be16be/eZEq6NiX7NoSg1s","rockBg");t("conf");cc.Class({extends:cc.Component,ctor:function(){this._stickPos={x:0,y:0},this._speed=0,this._angle=0},properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},player:{default:null,type:cc.Node,displayName:"操作用户"}},onLoad:function(){this._initTouchEvent()},update:function(t){this._aimMove()},_aimMove:function(){this.player.x+=Math.cos(this._angle*(Math.PI/180))*this._speed,this.player.y+=Math.sin(this._angle*(Math.PI/180))*this._speed},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,t)},_touchStartEvent:function(t){this._speed=1;var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this._getDistance(e,cc.p(0,0)),n=this.node.width/2;this._stickPos=e;var i=this.node.getPosition().x+e.x,c=this.node.getPosition().y+e.y;o<n&&this.dot.setPosition(cc.p(i,c))},_touchMoveEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this._getDistance(e,cc.p(0,0)),n=this.node.width/2,i=this.node.getPosition().x+e.x,c=this.node.getPosition().y+e.y;if(o<n)this.dot.setPosition(cc.p(i,c));else{var s=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(i,c)))*n,a=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(i,c)))*n;this.dot.setPosition(cc.p(s,a))}},_touchEndEvent:function(t){this._speed=0,this.dot.setPosition(this.node.getPosition())},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_getRadian:function(t){return Math.PI/180*this._getAngle(t)},_getAngle:function(t){var e=this.node.getPosition();return this._angle=Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI),this._angle}}),cc._RF.pop()},{conf:"conf"}]},{},["Game","conf","rockBg"]);